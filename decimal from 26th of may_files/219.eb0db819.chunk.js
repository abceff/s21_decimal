(this.webpackJsonp=this.webpackJsonp||[]).push([[219],{FqZL:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return p}));var n=r("G3fq"),i=r.n(n),a=r("FxFN"),s=r("0AwG");const c="s40",o=7;function u(e){const t="string"==typeof e?Object(a.f)(e):e;return"bg".concat(t%o+1)}function l(e){return Object(s.i)(e)||" "}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.avatar_url)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sizeClass:r=c}=t,n=u(e.id),a=l(e.name);return'<div class="avatar identicon '.concat(i()(r)," ").concat(i()(n),'">').concat(i()(a),"</div>")}(e,t);const{sizeClass:r=c}=t;return'<img src="'.concat(i()(e.avatar_url),'" class="avatar ').concat(i()(r),'" />')}},FxFN:function(e,t,r){"use strict";r.d(t,"f",(function(){return o})),r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return f})),r.d(t,"c",(function(){return d}));r("S26F");var n=r("P/Kr"),i=r.n(n);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return parseInt("".concat(e).replace(/gid:\/\/gitlab\/.*\//g,""),10)||null},u={Append:"APPEND",Remove:"REMOVE",Replace:"REPLACE"},l="Group",p=function(e,t){if("string"!=typeof e)throw new TypeError("type must be a string; got ".concat(typeof e));if(!["number","string"].includes(typeof t))throw new TypeError("id must be a number or string; got ".concat(typeof t));return"gid://gitlab/".concat(e,"/").concat(t)},f=function(e,t){return t.map((function(t){return p(e,t)}))},d=function(e){if(!i()(e))throw new TypeError("nodes must be an array; got ".concat(typeof e));return e.map((function(e){return e.id?s(s({},e),{},{id:o(e.id)}):e}))}},Htnb:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r("GzNv"),r("QifN"),r("l9AF"),r("pBsb");var n=r("PxiM"),i=r.n(n),a=r("D+x4");function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"<b>",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"</b>";if(!e)return"";if(!t)return e;const s=Object(a.a)(e.toString(),{ALLOWED_TAGS:[]}),c=i.a.match(s,t.toString());return s.split("").map((function(e,t){return c.includes(t)?"".concat(r).concat(e).concat(n):e})).join("")}},KZHv:function(e,t,r){"use strict";r.r(t);var n=r("FkSe"),i=r("n7CP"),a=(r("EWC9"),r("orcL"),r("lx39")),s=r.n(a),c=r("yMGJ"),o=r.n(c),u=r("yi8e");const l="`vuex_module_mappers` can only be used with an array of strings, or an object with string values. Consider using the regular `vuex` map helpers instead.",p=function(e){return Array.isArray(e)?e.reduce((function(e,t){return Object.assign(e,{[t]:t})}),{}):e},f=function(){let{namespaceSelector:e,fields:t,vuexHelper:r,selector:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=o()(p(t),(function(t){if(!s()(t))throw new Error(l);return function(){const r=e(this);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n(r,t,...a)}}));return r(i)},d=function(e,t){return f({namespaceSelector:e,fields:t,vuexHelper:u.f,selector:function(e,t,r){return r[e][t]}})},m=function(e,t){return f({namespaceSelector:e,fields:t,vuexHelper:u.c,selector:function(e,t,r){for(var n=arguments.length,i=new Array(n>3?n-3:0),a=3;a<n;a++)i[a-3]=arguments[a];return r("".concat(e,"/").concat(t),...i)}})};var h=r("pRET"),y=r("N79w"),b=r("Tzzi"),g=r("Htnb"),O=r("0AwG"),v=r("4ZIW"),j=r("nBaz");function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const q=v.a.mixin();var S={components:{Identicon:j.a},mixins:[q],inject:["vuexModule"],props:{matcher:{type:String,required:!1},itemId:{type:Number,required:!0},itemName:{type:String,required:!0},namespace:{type:String,required:!1},webUrl:{type:String,required:!0},avatarUrl:{required:!0,validator:e=>null===e||"string"==typeof e}},computed:P(P({},d((function(e){return e.vuexModule}),["dropdownType"])),{},{truncatedNamespace(){return Object(O.t)(this.namespace)},highlightedItemName(){return Object(g.a)(this.itemName,this.matcher)}})},I=r("tBpV"),E=Object(I.a)(S,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"frequent-items-list-item-container"},[r("a",{staticClass:"clearfix",attrs:{href:e.webUrl},on:{click:function(t){return e.track("click_link",{label:e.dropdownType+"_dropdown_frequent_items_list_item"})}}},[r("div",{ref:"frequentItemsItemAvatarContainer",staticClass:"frequent-items-item-avatar-container avatar-container rect-avatar s32"},[e.avatarUrl?r("img",{ref:"frequentItemsItemAvatar",staticClass:"avatar s32",attrs:{src:e.avatarUrl}}):r("identicon",{staticClass:"rect-avatar",attrs:{"entity-id":e.itemId,"entity-name":e.itemName,"size-class":"s32"}})],1),e._v(" "),r("div",{ref:"frequentItemsItemMetadataContainer",staticClass:"frequent-items-item-metadata-container"},[r("div",{ref:"frequentItemsItemTitle",staticClass:"frequent-items-item-title",attrs:{title:e.itemName},domProps:{innerHTML:e._s(e.highlightedItemName)}}),e._v(" "),e.namespace?r("div",{ref:"frequentItemsItemNamespace",staticClass:"frequent-items-item-namespace",attrs:{title:e.namespace}},[e._v("\n        "+e._s(e.truncatedNamespace)+"\n      ")]):e._e()])])])}),[],!1,null,null,null).exports;function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M={props:{namespace:{type:String,required:!0}},methods:{getTranslations(e){var t=this;return e.reduce((function(e,r){return C(C({},e),{},{[r]:h.g[t.namespace][r]})}),{})}}},N={components:{FrequentItemsListItem:E},mixins:[M],props:{items:{type:Array,required:!0},hasSearchQuery:{type:Boolean,required:!0},isFetchFailed:{type:Boolean,required:!0},matcher:{type:String,required:!0}},computed:{translations(){return this.getTranslations(["itemListEmptyMessage","itemListErrorMessage","searchListEmptyMessage","searchListErrorMessage"])},isListEmpty(){return 0===this.items.length},listEmptyMessage(){return this.hasSearchQuery?this.isFetchFailed?this.translations.searchListErrorMessage:this.translations.searchListEmptyMessage:this.isFetchFailed?this.translations.itemListErrorMessage:this.translations.itemListEmptyMessage},sanitizedItems(){return this.items.map(b.c)}}},F=Object(I.a)(N,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"frequent-items-list-container"},[r("ul",{ref:"frequentItemsList",staticClass:"list-unstyled"},[e.isListEmpty?r("li",{staticClass:"section-empty gl-mb-3",class:{"section-failure":e.isFetchFailed}},[e._v("\n      "+e._s(e.listEmptyMessage)+"\n    ")]):e._l(e.sanitizedItems,(function(t){return r("frequent-items-list-item",{key:t.id,attrs:{"item-id":t.id,"item-name":t.name,namespace:t.namespace,"web-url":t.webUrl,"avatar-url":t.avatarUrl,matcher:e.matcher}})}))],2)])}),[],!1,null,null,null).exports,D=r("Tmea"),T=r.n(D),A=r("iN9h");function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const B=v.a.mixin();var H={components:{GlSearchBoxByType:A.a},mixins:[M,B],inject:["vuexModule"],data:()=>({searchQuery:""}),computed:Q(Q({},d((function(e){return e.vuexModule}),["dropdownType"])),{},{translations(){return this.getTranslations(["searchInputPlaceholder"])}}),watch:{searchQuery:T()((function(){this.track("type_search_query",{label:"".concat(this.dropdownType,"_dropdown_frequent_items_search_input")}),this.setSearchQuery(this.searchQuery)}),500)},methods:Q({},m((function(e){return e.vuexModule}),["setSearchQuery"]))};function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var J,R,K={components:{FrequentItemsSearchInput:Object(I.a)(H,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-input-container d-none d-sm-block"},[r("gl-search-box-by-type",{attrs:{placeholder:e.translations.searchInputPlaceholder},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1)}),[],!1,null,null,null).exports,FrequentItemsList:F,GlLoadingIcon:n.a},mixins:[M],inject:["vuexModule"],props:{currentUserName:{type:String,required:!0},currentItem:{type:Object,required:!0}},computed:G(G(G({},d((function(e){return e.vuexModule}),["searchQuery","isLoadingItems","isFetchFailed","items"])),(J=function(e){return e.vuexModule},R=["hasSearchQuery"],f({namespaceSelector:J,fields:R,vuexHelper:u.f,selector:function(e,t,r,n){return n["".concat(e,"/").concat(t)]}}))),{},{translations(){return this.getTranslations(["loadingMessage","header"])}}),created(){const{namespace:e,currentUserName:t,currentItem:r}=this,n="".concat(t,"/").concat(h.f[e]);this.setNamespace(e),this.setStorageKey(n),r.id&&this.logItemAccess(n,r),y.a.$on("".concat(this.namespace,"-dropdownOpen"),this.dropdownOpenHandler);const i=document.getElementById("nav-".concat(this.namespace,"-dropdown"));i&&i.classList.contains("show")&&this.dropdownOpenHandler()},beforeDestroy(){y.a.$off("".concat(this.namespace,"-dropdownOpen"),this.dropdownOpenHandler)},methods:G(G({},m((function(e){return e.vuexModule}),["setNamespace","setStorageKey","fetchFrequentItems"])),{},{dropdownOpenHandler(){(""===this.searchQuery||Object(b.b)())&&this.fetchFrequentItems()},logItemAccess(e,t){const r=Object(b.c)(t);if(!i.a.isLocalStorageAccessSafe())return!1;const n=localStorage.getItem(e),a=n?JSON.parse(n):[G(G({},r),{},{frequency:1})],s=a.findIndex((function(e){return e.id===r.id}));return s>-1?a[s]=Object(b.d)(a[s],r):(a.length===h.a.MAX_COUNT&&a.shift(),a.push(G(G({},r),{},{frequency:1}))),localStorage.setItem(e,JSON.stringify(a))}})},Z=Object(I.a)(K,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"gl-display-flex gl-flex-direction-column gl-flex-align-items-stretch gl-h-full"},[r("frequent-items-search-input",{attrs:{namespace:e.namespace,"data-testid":"frequent-items-search-input"}}),e._v(" "),e.isLoadingItems?r("gl-loading-icon",{staticClass:"loading-animation prepend-top-20",attrs:{label:e.translations.loadingMessage,size:"lg","data-testid":"loading"}}):e._e(),e._v(" "),e.isLoadingItems||e.hasSearchQuery?e._e():r("div",{staticClass:"section-header",attrs:{"data-testid":"header"}},[e._v("\n    "+e._s(e.translations.header)+"\n  ")]),e._v(" "),e.isLoadingItems?e._e():r("frequent-items-list",{attrs:{items:e.items,namespace:e.namespace,"has-search-query":e.hasSearchQuery,"is-fetch-failed":e.isFetchFailed,matcher:e.searchQuery}})],1)}),[],!1,null,null,null);t.default=Z.exports},nBaz:function(e,t,r){"use strict";var n=r("FqZL"),i={props:{entityId:{type:[Number,String],required:!0},entityName:{type:String,required:!0},sizeClass:{type:String,required:!1,default:"s40"}},computed:{identiconBackgroundClass(){return Object(n.a)(this.entityId)},identiconTitle(){return Object(n.b)(this.entityName)}}},a=r("tBpV"),s=Object(a.a)(i,(function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"identicon",staticClass:"avatar identicon",class:[this.sizeClass,this.identiconBackgroundClass]},[this._v("\n  "+this._s(this.identiconTitle)+"\n")])}),[],!1,null,null,null);t.a=s.exports}}]);
//# sourceMappingURL=219.eb0db819.chunk.js.map